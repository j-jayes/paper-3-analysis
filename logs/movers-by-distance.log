---------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/jonathanjayes/Documents/PhD/paper-3-analysis/logs/movers-by-distance.log
  log type:  text
 opened on:  20 Dec 2023, 13:43:36

. 
. *--------------------------------------------------*
. * What is the average distance someone moves ?     *
. *--------------------------------------------------*
. 
. summarize dist_bp_to_cp_km if dist_bp_to_cp_km > 0, detail

        Distance from birth parish to current parish
-------------------------------------------------------------
      Percentiles      Smallest
 1%            3              2
 5%            4              2
10%            7              2       Obs             217,686
25%           11              2       Sum of wgt.     217,686

50%           24                      Mean            68.4992
                        Largest       Std. dev.      114.0311
75%           68           1243
90%          194           1255       Variance       13003.08
95%          297           1275       Skewness       3.511435
99%          576           1283       Kurtosis       19.19167

. /* 
> In our sample of treated and control individuals, who are older than 15, the average distance moved from birth parish to current parish is 36 km.
> */
. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. gen mover = .
(343,488 missing values generated)

. replace mover = 0 if dist_bp_to_cp_km == 0
(125,802 real changes made)

. replace mover = 1 if dist_bp_to_cp_km > 0
(217,686 real changes made)

. 
. label var mover "Moves from parish of birth"

. 
. tab mover birth_parish_treated, col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

Moves from |     Birth Parish
 parish of |       (Treated)
     birth |         0          1 |     Total
-----------+----------------------+----------
         0 |   109,394     16,408 |   125,802 
           |     35.82      43.08 |     36.62 
-----------+----------------------+----------
         1 |   196,005     21,681 |   217,686 
           |     64.18      56.92 |     63.38 
-----------+----------------------+----------
     Total |   305,399     38,089 |   343,488 
           |    100.00     100.00 |    100.00 

. 
. reg log_income mover##birth_parish_treated age age_2 female i.marital i.schooling i.hisclass, vce(cluster birth_parish_ref_code)

Linear regression                               Number of obs     =    343,488
                                                F(19, 2140)       =    1942.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2729
                                                Root MSE          =     2.6277

                                (Std. err. adjusted for 2,141 clusters in birth_parish_ref_code)
------------------------------------------------------------------------------------------------
                               |               Robust
                    log_income | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------------------------+----------------------------------------------------------------
                       1.mover |   .4585958   .0732789     6.26   0.000     .3148904    .6023012
        1.birth_parish_treated |   .5309361   .1955851     2.71   0.007     .1473794    .9144929
                               |
    mover#birth_parish_treated |
                          1 1  |  -.3711827   .1952218    -1.90   0.057    -.7540269    .0116615
                               |
                           age |   .1626727   .0030789    52.84   0.000     .1566348    .1687105
                         age_2 |  -.0021475   .0000293   -73.27   0.000     -.002205     -.00209
                        female |  -1.838721   .0657364   -27.97   0.000    -1.967635   -1.709807
                               |
                       marital |
                      Married  |   1.095023   .1006597    10.88   0.000     .8976221    1.292424
                        Other  |  -.8513532    1.63888    -0.52   0.603    -4.065317     2.36261
                    Unmarried  |   .6159519      .0964     6.39   0.000     .4269045    .8049994
                Widow/Widower  |    .334152   .0979823     3.41   0.001     .1420015    .5263024
                               |
                     schooling |
       Post primary schooling  |   .8852214   .0658857    13.44   0.000     .7560147    1.014428
Post-secondary and university  |   1.225056   .0937877    13.06   0.000     1.041131     1.40898
               Primary school  |   .2855924   .0598796     4.77   0.000     .1681642    .4030206
                               |
                      hisclass |
        Farmers and fishermen  |  -1.052435   .0567202   -18.55   0.000    -1.163668   -.9412028
                      Foremen  |  -.4763554   .0565694    -8.42   0.000     -.587292   -.3654187
          Low-skilled workers  |  -1.118404   .0503285   -22.22   0.000    -1.217101   -1.019706
       Medium-skilled workers  |  -.8287234   .0571258   -14.51   0.000    -.9407514   -.7166954
            Unskilled workers  |  -1.554539   .0524017   -29.67   0.000    -1.657302   -1.451775
                 White collar  |  -.0231973   .0445745    -0.52   0.603    -.1106112    .0642166
                               |
                         _cons |   3.156715   .1427728    22.11   0.000     2.876727    3.436703
------------------------------------------------------------------------------------------------

. 
. 
. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. summarize mover, detail

                 Moves from parish of birth
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs             343,488
25%            0              0       Sum of wgt.     343,488

50%            1                      Mean           .6337514
                        Largest       Std. dev.      .4817792
75%            1              1
90%            1              1       Variance       .2321112
95%            1              1       Skewness      -.5552402
99%            1              1       Kurtosis       1.308292

. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. summarize mover, detail

                 Moves from parish of birth
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs             343,488
25%            0              0       Sum of wgt.     343,488

50%            1                      Mean           .6337514
                        Largest       Std. dev.      .4817792
75%            1              1
90%            1              1       Variance       .2321112
95%            1              1       Skewness      -.5552402
99%            1              1       Kurtosis       1.308292

. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. summarize dist_bp_to_cp_km if dist_bp_to_cp_km > 0, detail

        Distance from birth parish to current parish
-------------------------------------------------------------
      Percentiles      Smallest
 1%            3              2
 5%            4              2
10%            7              2       Obs             217,686
25%           11              2       Sum of wgt.     217,686

50%           24                      Mean            68.4992
                        Largest       Std. dev.      114.0311
75%           68           1243
90%          194           1255       Variance       13003.08
95%          297           1275       Skewness       3.511435
99%          576           1283       Kurtosis       19.19167

. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. reg log_income mover##birth_parish_treated age age_2 female i.marital i.schooling i.hisclass, vce(cluster birth_parish_ref_code)

Linear regression                               Number of obs     =    343,488
                                                F(19, 2140)       =    1942.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2729
                                                Root MSE          =     2.6277

                                (Std. err. adjusted for 2,141 clusters in birth_parish_ref_code)
------------------------------------------------------------------------------------------------
                               |               Robust
                    log_income | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------------------------+----------------------------------------------------------------
                       1.mover |   .4585958   .0732789     6.26   0.000     .3148904    .6023012
        1.birth_parish_treated |   .5309361   .1955851     2.71   0.007     .1473794    .9144929
                               |
    mover#birth_parish_treated |
                          1 1  |  -.3711827   .1952218    -1.90   0.057    -.7540269    .0116615
                               |
                           age |   .1626727   .0030789    52.84   0.000     .1566348    .1687105
                         age_2 |  -.0021475   .0000293   -73.27   0.000     -.002205     -.00209
                        female |  -1.838721   .0657364   -27.97   0.000    -1.967635   -1.709807
                               |
                       marital |
                      Married  |   1.095023   .1006597    10.88   0.000     .8976221    1.292424
                        Other  |  -.8513532    1.63888    -0.52   0.603    -4.065317     2.36261
                    Unmarried  |   .6159519      .0964     6.39   0.000     .4269045    .8049994
                Widow/Widower  |    .334152   .0979823     3.41   0.001     .1420015    .5263024
                               |
                     schooling |
       Post primary schooling  |   .8852214   .0658857    13.44   0.000     .7560147    1.014428
Post-secondary and university  |   1.225056   .0937877    13.06   0.000     1.041131     1.40898
               Primary school  |   .2855924   .0598796     4.77   0.000     .1681642    .4030206
                               |
                      hisclass |
        Farmers and fishermen  |  -1.052435   .0567202   -18.55   0.000    -1.163668   -.9412028
                      Foremen  |  -.4763554   .0565694    -8.42   0.000     -.587292   -.3654187
          Low-skilled workers  |  -1.118404   .0503285   -22.22   0.000    -1.217101   -1.019706
       Medium-skilled workers  |  -.8287234   .0571258   -14.51   0.000    -.9407514   -.7166954
            Unskilled workers  |  -1.554539   .0524017   -29.67   0.000    -1.657302   -1.451775
                 White collar  |  -.0231973   .0445745    -0.52   0.603    -.1106112    .0642166
                               |
                         _cons |   3.156715   .1427728    22.11   0.000     2.876727    3.436703
------------------------------------------------------------------------------------------------

. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. 
. gen mover = .
variable mover already defined
r(110);

end of do-file

r(110);

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. reg log_income mover##birth_parish_treated age age_2 female i.marital i.schooling i.hisclass, vce(cluster birth_parish_ref_code)

Linear regression                               Number of obs     =    343,488
                                                F(19, 2140)       =    1942.41
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2729
                                                Root MSE          =     2.6277

                                (Std. err. adjusted for 2,141 clusters in birth_parish_ref_code)
------------------------------------------------------------------------------------------------
                               |               Robust
                    log_income | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------------------------+----------------------------------------------------------------
                       1.mover |   .4585958   .0732789     6.26   0.000     .3148904    .6023012
        1.birth_parish_treated |   .5309361   .1955851     2.71   0.007     .1473794    .9144929
                               |
    mover#birth_parish_treated |
                          1 1  |  -.3711827   .1952218    -1.90   0.057    -.7540269    .0116615
                               |
                           age |   .1626727   .0030789    52.84   0.000     .1566348    .1687105
                         age_2 |  -.0021475   .0000293   -73.27   0.000     -.002205     -.00209
                        female |  -1.838721   .0657364   -27.97   0.000    -1.967635   -1.709807
                               |
                       marital |
                      Married  |   1.095023   .1006597    10.88   0.000     .8976221    1.292424
                        Other  |  -.8513532    1.63888    -0.52   0.603    -4.065317     2.36261
                    Unmarried  |   .6159519      .0964     6.39   0.000     .4269045    .8049994
                Widow/Widower  |    .334152   .0979823     3.41   0.001     .1420015    .5263024
                               |
                     schooling |
       Post primary schooling  |   .8852214   .0658857    13.44   0.000     .7560147    1.014428
Post-secondary and university  |   1.225056   .0937877    13.06   0.000     1.041131     1.40898
               Primary school  |   .2855924   .0598796     4.77   0.000     .1681642    .4030206
                               |
                      hisclass |
        Farmers and fishermen  |  -1.052435   .0567202   -18.55   0.000    -1.163668   -.9412028
                      Foremen  |  -.4763554   .0565694    -8.42   0.000     -.587292   -.3654187
          Low-skilled workers  |  -1.118404   .0503285   -22.22   0.000    -1.217101   -1.019706
       Medium-skilled workers  |  -.8287234   .0571258   -14.51   0.000    -.9407514   -.7166954
            Unskilled workers  |  -1.554539   .0524017   -29.67   0.000    -1.657302   -1.451775
                 White collar  |  -.0231973   .0445745    -0.52   0.603    -.1106112    .0642166
                               |
                         _cons |   3.156715   .1427728    22.11   0.000     2.876727    3.436703
------------------------------------------------------------------------------------------------

. eststo Model1

. 
. 
. local results_dir "results/regressions/"

. 
. 
. * Tabulate the regression results and save them in TeX format
. esttab Model1 using `results_dir'/08-log-income-regression-for-movers-and-stayers.tex, label replace ///
>   stats(r2 N F mean_depvar, fmt(2 0 3 2) labels("R-squared" "Observations" "F-stat" "Mean Dependent Var")) ///
>   cells(b(star fmt(3)) se(par fmt(2))) ///
>   addnotes("Clustered standard errors in parentheses")
(file results/regressions//08-log-income-regression-for-movers-and-stayers.tex not found)
(output written to results/regressions//08-log-income-regression-for-movers-and-stayers.tex)

. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. tab mover birth_parish_treated female, col
too many variables specified
r(103);

end of do-file

r(103);

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. *--------------------------------------------------*
. * Income Regressions: log_income as Dependent Var  *
. *--------------------------------------------------*
. 
. * Set the environment
. clear all

. set more off 

. 
. * Setting the working directory
. * cd "C:\Users\User\Documents\Recon\paper-3-analysis"
. cd "/Users/jonathanjayes/Documents/PhD/paper-3-analysis/"
/Users/jonathanjayes/Documents/PhD/paper-3-analysis

. 
. 
. * Load the dataset created by the 'set_dataset_params.do' script
. use "data/census/1930_census_regression_dataset_params_set.dta"

. 
. * Drop observations where the individual is not employed
. drop if employed == 0
(216,540 observations deleted)

. 
. * Define the results directory for storing output
. local results_dir "results/regressions/"

. 
. *-------------------------------------------------------------*
. * Linear Regressions for log_income: Main Specification 
. *-------------------------------------------------------------*
. 
. * Model 1: Regression with log_income as DV, birth_parish_treated as IV
. quietly summarize log_income

. local mean1 = round(r(mean), 0.01)

. reg log_income birth_parish_treated, vce(cluster birth_parish_ref_code)

Linear regression                               Number of obs     =    343,488
                                                F(1, 2140)        =      14.68
                                                Prob > F          =     0.0001
                                                R-squared         =     0.0015
                                                Root MSE          =     3.0793

                      (Std. err. adjusted for 2,141 clusters in birth_parish_ref_code)
--------------------------------------------------------------------------------------
                     |               Robust
          log_income | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
---------------------+----------------------------------------------------------------
birth_parish_treated |   .3823241   .0997908     3.83   0.000     .1866271    .5780212
               _cons |   5.390163   .0425778   126.60   0.000     5.306665    5.473661
--------------------------------------------------------------------------------------

. eststo Model1

. estadd scalar mean_depvar = `mean1'

added scalar:
        e(mean_depvar) =  5.43

. 
end of do-file

. do "/var/folders/xp/90b2vmmj0cg7rv097x887f6m0000gn/T//SD11822.000000"

. quietly summarize log_income

. local mean2 = round(r(mean), 0.01)

. reg log_income birth_parish_treated age age_2 female, vce(cluster birth_parish_ref_code)

Linear regression                               Number of obs     =    343,488
                                                F(4, 2140)        =    5576.51
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2227
                                                Root MSE          =     2.7169

                      (Std. err. adjusted for 2,141 clusters in birth_parish_ref_code)
--------------------------------------------------------------------------------------
                     |               Robust
          log_income | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
---------------------+----------------------------------------------------------------
birth_parish_treated |   .2909931   .1068145     2.72   0.006      .081522    .5004642
                 age |   .2205997   .0031998    68.94   0.000     .2143246    .2268748
               age_2 |  -.0027373   .0000294   -93.14   0.000     -.002795   -.0026797
              female |  -1.922208   .0544196   -35.32   0.000    -2.028929   -1.815488
               _cons |    2.41352   .0974167    24.78   0.000     2.222479    2.604561
--------------------------------------------------------------------------------------

. eststo Model2

. estadd scalar mean_depvar = `mean2'

added scalar:
        e(mean_depvar) =  5.43

. 
. * Model 3: Extending Model 2 by adding marital status, schooling, and hisclass
. quietly summarize log_income

. local mean3 = round(r(mean), 0.01)

. reg log_income birth_parish_treated age age_2 female i.marital i.schooling i.hisclass, vce(cluster birth_parish_ref_code)

Linear regression                               Number of obs     =    343,488
                                                F(17, 2140)       =    2009.51
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2687
                                                Root MSE          =     2.6354

                                (Std. err. adjusted for 2,141 clusters in birth_parish_ref_code)
------------------------------------------------------------------------------------------------
                               |               Robust
                    log_income | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------------------------+----------------------------------------------------------------
          birth_parish_treated |   .2852918    .086264     3.31   0.001     .1161218    .4544617
                           age |   .1643698   .0031554    52.09   0.000     .1581818    .1705577
                         age_2 |  -.0021627   .0000296   -73.04   0.000    -.0022208   -.0021046
                        female |   -1.79994   .0615669   -29.24   0.000    -1.920677   -1.679202
                               |
                       marital |
                      Married  |   1.097431    .101031    10.86   0.000     .8993022    1.295561
                        Other  |   -1.04036   1.576058    -0.66   0.509    -4.131125    2.050404
                    Unmarried  |    .548464   .0963878     5.69   0.000     .3594405    .7374874
                Widow/Widower  |   .3218992    .097434     3.30   0.001      .130824    .5129743
                               |
                     schooling |
       Post primary schooling  |    .910843   .0667127    13.65   0.000     .7800146    1.041671
Post-secondary and university  |   1.285588   .0958314    13.42   0.000     1.097655     1.47352
               Primary school  |    .274315   .0616184     4.45   0.000     .1534767    .3951533
                               |
                      hisclass |
        Farmers and fishermen  |  -1.170982     .05471   -21.40   0.000    -1.278272   -1.063691
                      Foremen  |  -.4736207   .0564544    -8.39   0.000     -.584332   -.3629094
          Low-skilled workers  |  -1.171108   .0523617   -22.37   0.000    -1.273793   -1.068423
       Medium-skilled workers  |  -.8440855   .0594174   -14.21   0.000    -.9606074   -.7275636
            Unskilled workers  |  -1.589904   .0542892   -29.29   0.000    -1.696369   -1.483439
                 White collar  |  -.0296236   .0444366    -0.67   0.505     -.116767    .0575198
                               |
                         _cons |   3.487283   .1373163    25.40   0.000     3.217996    3.756571
------------------------------------------------------------------------------------------------

. eststo Model3

. estadd scalar mean_depvar = `mean3'

added scalar:
        e(mean_depvar) =  5.43

. 
end of do-file

. exit, clear
